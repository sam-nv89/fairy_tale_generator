# AI Memo — Генератор Сказок

Данный файл содержит важные заметки об архитектурных решениях, багах и «подводных камнях» проекта, предназначенные для будущих сессий разработки.

## 13.02.2026
### Текущий статус: Личная библиотека и Полировка UI
- **Личная библиотека**: Сейчас реализована на локальном хранилище `stories.json`. Модуль `storage.py` инкапсулирует всю логику. В Фазе 3 планируется прозрачный перенос этих данных в Supabase при авторизации пользователя.
- **UI & CSS**: Использование Streamlit `st.download_button` требует внимания к отступам. Решено через `margin-bottom` в HTML-блоке текста выше кнопки и `st.divider()` ниже.
- **Prompt Engineering**: Инструкция по склонению имен в системном промпте значительно улучшила «натуральность» сказок. Важно сохранять этот блок при рефакторинге промптов.
- **Критический фикс**: Удалены лишние бэктики в конце `app.py`, вызывавшие `SyntaxError`. При массовом редактировании файлов через LLM нужно проверять чистоту закрывающих тегов.

### Технический долг
- [ ] **Аудио в JSON**: Сейчас `BytesIO` аудио-объекты не сериализуются в `stories.json`. Сказки в библиотеке пока не имеют привязанного аудио. В Supabase версии нужно хранить URL на mp3 в Storage.
- [ ] **Centering**: Иконка Ghost Button отцентрирована через `padding-right: 5px` (оптическая компенсация). На мобильных устройствах проверить, не смещается ли она.
